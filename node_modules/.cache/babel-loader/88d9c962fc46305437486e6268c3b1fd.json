{"ast":null,"code":"import _classCallCheck from\"C:\\\\my-crypto-zombie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\my-crypto-zombie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\my-crypto-zombie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\my-crypto-zombie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\my-crypto-zombie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\my-crypto-zombie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import MyWeb3 from'./MyWeb3';var ContractAdmin=/*#__PURE__*/function(_Component){_inherits(ContractAdmin,_Component);function ContractAdmin(props){var _this;_classCallCheck(this,ContractAdmin);_this=_possibleConstructorReturn(this,_getPrototypeOf(ContractAdmin).call(this,props));_this.state={contractAddress:'',contractOwner:'',ContractName:'',ContractSymbol:'',ContractBalance:'',attackVictoryProbability:70,levelUpFee:0,minPrice:0,tax:0,zombiePrice:0};_this.inputAttackVictoryProbability=_this.inputAttackVictoryProbability.bind(_assertThisInitialized(_this));_this.setAttackVictoryProbability=_this.setAttackVictoryProbability.bind(_assertThisInitialized(_this));_this.inputLevelUpFee=_this.inputLevelUpFee.bind(_assertThisInitialized(_this));_this.setLevelUpFee=_this.setLevelUpFee.bind(_assertThisInitialized(_this));_this.inputMinPrice=_this.inputMinPrice.bind(_assertThisInitialized(_this));_this.setMinPrice=_this.setMinPrice.bind(_assertThisInitialized(_this));_this.inputTax=_this.inputTax.bind(_assertThisInitialized(_this));_this.setTax=_this.setTax.bind(_assertThisInitialized(_this));_this.inputZombiePrice=_this.inputZombiePrice.bind(_assertThisInitialized(_this));_this.setZombiePrice=_this.setZombiePrice.bind(_assertThisInitialized(_this));_this.withdraw=_this.withdraw.bind(_assertThisInitialized(_this));return _this;}_createClass(ContractAdmin,[{key:\"componentDidMount\",value:function componentDidMount(){var that=this;var ethereum=window.ethereum;if(typeof ethereum!=='undefined'||typeof window.web3!=='undefined'){MyWeb3.init().then(function(res){// console.log(window.web3)\n// console.log(ethereum)\n// console.log(window.MyContract)\nMyWeb3.owner().then(function(contractOwner){if(window.defaultAccount===contractOwner){that.setState({contractOwner:contractOwner});that.getContractName();that.getContractSymbol();that.checkBalance();that.levelUpFee();that.minPrice();that.tax();that.zombiePrice();that.setState({contractAddress:window.MyContract._address});}});});}else{alert('You have to install MetaMask !');}}},{key:\"getContractName\",value:function getContractName(){var that=this;MyWeb3.name().then(function(name){that.setState({ContractName:name});});}},{key:\"getContractSymbol\",value:function getContractSymbol(){var that=this;MyWeb3.symbol().then(function(symbol){that.setState({ContractSymbol:symbol});});}},{key:\"checkBalance\",value:function checkBalance(){var that=this;MyWeb3.checkBalance().then(function(balance){that.setState({ContractBalance:balance});});}},{key:\"withdraw\",value:function withdraw(){var that=this;MyWeb3.withdraw().then(function(res){that.checkBalance();});}},{key:\"setAttackVictoryProbability\",value:function setAttackVictoryProbability(){MyWeb3.setAttackVictoryProbability(this.state.attackVictoryProbability).then(function(res){console.log(res);window.location.reload();});}},{key:\"inputAttackVictoryProbability\",value:function inputAttackVictoryProbability(event){this.setState({attackVictoryProbability:event.target.value});}},{key:\"levelUpFee\",value:function levelUpFee(){var that=this;MyWeb3.levelUpFee().then(function(levelUpFee){that.setState({levelUpFee:levelUpFee});});}},{key:\"setLevelUpFee\",value:function setLevelUpFee(){MyWeb3.setLevelUpFee(this.state.levelUpFee).then(function(res){console.log(res);window.location.reload();});}},{key:\"inputLevelUpFee\",value:function inputLevelUpFee(event){this.setState({levelUpFee:event.target.value});}},{key:\"minPrice\",value:function minPrice(){var that=this;MyWeb3.minPrice().then(function(minPrice){that.setState({minPrice:minPrice});});}},{key:\"setMinPrice\",value:function setMinPrice(){MyWeb3.setMinPrice(this.state.minPrice).then(function(res){console.log(res);window.location.reload();});}},{key:\"inputMinPrice\",value:function inputMinPrice(event){this.setState({minPrice:event.target.value});}},{key:\"tax\",value:function tax(){var that=this;MyWeb3.tax().then(function(tax){that.setState({tax:tax});});}},{key:\"setTax\",value:function setTax(){MyWeb3.setTax(this.state.tax).then(function(res){console.log(res);window.location.reload();});}},{key:\"inputTax\",value:function inputTax(event){this.setState({tax:event.target.value});}},{key:\"zombiePrice\",value:function zombiePrice(){var that=this;MyWeb3.zombiePrice().then(function(zombiePrice){that.setState({zombiePrice:zombiePrice});});}},{key:\"setZombiePrice\",value:function setZombiePrice(){MyWeb3.setZombiePrice(this.state.zombiePrice).then(function(res){console.log(res);window.location.reload();});}},{key:\"inputZombiePrice\",value:function inputZombiePrice(event){this.setState({zombiePrice:event.target.value});}},{key:\"render\",value:function render(){if(window.defaultAccount===this.state.contractOwner){return React.createElement(\"div\",{className:\"contract-admin\"},React.createElement(\"dl\",null,React.createElement(\"dt\",null,\"\\u5408\\u7EA6\\u5730\\u5740\"),React.createElement(\"dd\",{className:\"lowcase\"},this.state.contractAddress),React.createElement(\"dt\",null,\"\\u7BA1\\u7406\\u5458\"),React.createElement(\"dd\",{className:\"lowcase\"},this.state.contractOwner),React.createElement(\"dt\",null,\"\\u5408\\u7EA6\\u540D\\u79F0\"),React.createElement(\"dd\",null,this.state.ContractName),React.createElement(\"dt\",null,\"\\u5408\\u7EA6\\u6807\\u8BC6\"),React.createElement(\"dd\",null,this.state.ContractSymbol),React.createElement(\"dt\",null,\"\\u5408\\u7EA6\\u4F59\\u989D\"),React.createElement(\"dd\",null,this.state.ContractBalance,React.createElement(\"button\",{className:\"pay-btn pay-btn-last\",onClick:this.withdraw},React.createElement(\"span\",null,\"\\u63D0\\u6B3E\"))),React.createElement(\"dt\",null,\"\\u5BF9\\u6218\\u80DC\\u7387\"),React.createElement(\"dd\",null,React.createElement(\"input\",{type:\"text\",id:\"attackVictoryProbability\",value:this.state.attackVictoryProbability,onChange:this.inputAttackVictoryProbability}),React.createElement(\"button\",{className:\"pay-btn pay-btn-last\",onClick:this.setAttackVictoryProbability},React.createElement(\"span\",null,\"\\u8BBE\\u7F6E\"))),React.createElement(\"dt\",null,\"\\u5347\\u7EA7\\u8D39\"),React.createElement(\"dd\",null,React.createElement(\"input\",{type:\"text\",id:\"levelUpFee\",value:this.state.levelUpFee,onChange:this.inputLevelUpFee}),React.createElement(\"button\",{className:\"pay-btn pay-btn-last\",onClick:this.setLevelUpFee},React.createElement(\"span\",null,\"\\u8BBE\\u7F6E\"))),React.createElement(\"dt\",null,\"\\u6700\\u4F4E\\u552E\\u4EF7\"),React.createElement(\"dd\",null,React.createElement(\"input\",{type:\"text\",id:\"minPrice\",value:this.state.minPrice,onChange:this.inputMinPrice}),React.createElement(\"button\",{className:\"pay-btn pay-btn-last\",onClick:this.setMinPrice},React.createElement(\"span\",null,\"\\u8BBE\\u7F6E\"))),React.createElement(\"dt\",null,\"\\u7A0E\\u91D1\"),React.createElement(\"dd\",null,React.createElement(\"input\",{type:\"text\",id:\"tax\",value:this.state.tax,onChange:this.inputTax}),React.createElement(\"button\",{className:\"pay-btn pay-btn-last\",onClick:this.setTax},React.createElement(\"span\",null,\"\\u8BBE\\u7F6E\"))),React.createElement(\"dt\",null,\"\\u50F5\\u5C38\\u552E\\u4EF7\"),React.createElement(\"dd\",null,React.createElement(\"input\",{type:\"text\",id:\"zombiePrice\",value:this.state.zombiePrice,onChange:this.inputZombiePrice}),React.createElement(\"button\",{className:\"pay-btn pay-btn-last\",onClick:this.setZombiePrice},React.createElement(\"span\",null,\"\\u8BBE\\u7F6E\")))));}else{return React.createElement(\"div\",null);}}}]);return ContractAdmin;}(Component);export default ContractAdmin;","map":{"version":3,"sources":["C:/my-crypto-zombie/src/ContractAdmin.js"],"names":["React","Component","MyWeb3","ContractAdmin","props","state","contractAddress","contractOwner","ContractName","ContractSymbol","ContractBalance","attackVictoryProbability","levelUpFee","minPrice","tax","zombiePrice","inputAttackVictoryProbability","bind","setAttackVictoryProbability","inputLevelUpFee","setLevelUpFee","inputMinPrice","setMinPrice","inputTax","setTax","inputZombiePrice","setZombiePrice","withdraw","that","ethereum","window","web3","init","then","res","owner","defaultAccount","setState","getContractName","getContractSymbol","checkBalance","MyContract","_address","alert","name","symbol","balance","console","log","location","reload","event","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport MyWeb3 from './MyWeb3'\r\n\r\nclass ContractAdmin extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            contractAddress:'',\r\n            contractOwner:'',\r\n            ContractName:'',\r\n            ContractSymbol:'',\r\n            ContractBalance:'',\r\n            attackVictoryProbability:70,\r\n            levelUpFee:0,\r\n            minPrice:0,\r\n            tax:0,\r\n            zombiePrice:0\r\n        }\r\n        this.inputAttackVictoryProbability = this.inputAttackVictoryProbability.bind(this)\r\n        this.setAttackVictoryProbability = this.setAttackVictoryProbability.bind(this)\r\n        this.inputLevelUpFee = this.inputLevelUpFee.bind(this)\r\n        this.setLevelUpFee = this.setLevelUpFee.bind(this)\r\n        this.inputMinPrice = this.inputMinPrice.bind(this)\r\n        this.setMinPrice = this.setMinPrice.bind(this)\r\n        this.inputTax = this.inputTax.bind(this)\r\n        this.setTax = this.setTax.bind(this)\r\n        this.inputZombiePrice = this.inputZombiePrice.bind(this)\r\n        this.setZombiePrice = this.setZombiePrice.bind(this)\r\n        this.withdraw = this.withdraw.bind(this)\r\n    }\r\n    \r\n    componentDidMount(){\r\n        let that = this\r\n        let ethereum = window.ethereum\r\n        if (typeof  ethereum !== 'undefined' || (typeof window.web3 !== 'undefined')) {\r\n            MyWeb3.init().then(function(res){\r\n                // console.log(window.web3)\r\n                // console.log(ethereum)\r\n                // console.log(window.MyContract)\r\n                MyWeb3.owner().then(function (contractOwner) {\r\n                    if(window.defaultAccount === contractOwner){\r\n                        that.setState({contractOwner:contractOwner})\r\n                        that.getContractName()\r\n                        that.getContractSymbol()\r\n                        that.checkBalance()\r\n                        that.levelUpFee()\r\n                        that.minPrice()\r\n                        that.tax()\r\n                        that.zombiePrice()\r\n                        that.setState({\r\n                            contractAddress:window.MyContract._address\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n        }else {\r\n            alert('You have to install MetaMask !')\r\n        }\r\n    }\r\n    getContractName(){\r\n        let that = this\r\n        MyWeb3.name().then(function (name) {\r\n            that.setState({ContractName:name})\r\n        })\r\n    }\r\n    getContractSymbol(){\r\n        let that = this\r\n        MyWeb3.symbol().then(function (symbol) {\r\n            that.setState({ContractSymbol:symbol})\r\n        })\r\n    }\r\n    checkBalance(){\r\n        let that = this\r\n        MyWeb3.checkBalance().then(function (balance) {\r\n            that.setState({ContractBalance:balance})\r\n        })\r\n    }\r\n    withdraw(){\r\n        let that = this\r\n        MyWeb3.withdraw().then(function (res) {\r\n            that.checkBalance()\r\n        })\r\n    }\r\n    setAttackVictoryProbability(){\r\n        MyWeb3.setAttackVictoryProbability(this.state.attackVictoryProbability).then(function (res) {\r\n            console.log(res)\r\n            window.location.reload()\r\n        })\r\n    }\r\n    inputAttackVictoryProbability(event){\r\n        this.setState({\r\n            attackVictoryProbability:event.target.value\r\n        })\r\n    }\r\n    levelUpFee(){\r\n        let that = this\r\n        MyWeb3.levelUpFee().then(function (levelUpFee) {\r\n            that.setState({levelUpFee:levelUpFee})\r\n        })\r\n    }\r\n    setLevelUpFee(){\r\n        MyWeb3.setLevelUpFee(this.state.levelUpFee).then(function (res) {\r\n            console.log(res)\r\n            window.location.reload()\r\n        })\r\n    }\r\n    inputLevelUpFee(event){\r\n        this.setState({\r\n            levelUpFee:event.target.value\r\n        })\r\n    }\r\n    minPrice(){\r\n        let that = this\r\n        MyWeb3.minPrice().then(function (minPrice) {\r\n            that.setState({minPrice:minPrice})\r\n        })\r\n    }\r\n    setMinPrice(){\r\n        MyWeb3.setMinPrice(this.state.minPrice).then(function (res) {\r\n            console.log(res)\r\n            window.location.reload()\r\n        })\r\n    }\r\n    inputMinPrice(event){\r\n        this.setState({\r\n            minPrice:event.target.value\r\n        })\r\n    }\r\n    tax(){\r\n        let that = this\r\n        MyWeb3.tax().then(function (tax) {\r\n            that.setState({tax:tax})\r\n        })\r\n    }\r\n    setTax(){\r\n        MyWeb3.setTax(this.state.tax).then(function (res) {\r\n            console.log(res)\r\n            window.location.reload()\r\n        })\r\n    }\r\n    inputTax(event){\r\n        this.setState({\r\n            tax:event.target.value\r\n        })\r\n    }\r\n    zombiePrice(){\r\n        let that = this\r\n        MyWeb3.zombiePrice().then(function (zombiePrice) {\r\n            that.setState({zombiePrice:zombiePrice})\r\n        })\r\n    }\r\n    setZombiePrice(){\r\n        MyWeb3.setZombiePrice(this.state.zombiePrice).then(function (res) {\r\n            console.log(res)\r\n            window.location.reload()\r\n        })\r\n    }\r\n    inputZombiePrice(event){\r\n        this.setState({\r\n            zombiePrice:event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    render() { \r\n        if(window.defaultAccount === this.state.contractOwner){\r\n            return ( \r\n                <div className='contract-admin'>\r\n                    <dl>\r\n                        <dt>合约地址</dt>\r\n                        <dd className='lowcase'>{this.state.contractAddress}</dd>\r\n                        <dt>管理员</dt>\r\n                        <dd className='lowcase'>{this.state.contractOwner}</dd>\r\n                        <dt>合约名称</dt>\r\n                        <dd>{this.state.ContractName}</dd>\r\n                        <dt>合约标识</dt>\r\n                        <dd>{this.state.ContractSymbol}</dd>\r\n                        <dt>合约余额</dt>\r\n                        <dd>\r\n                            {this.state.ContractBalance}\r\n                            <button className=\"pay-btn pay-btn-last\" onClick={this.withdraw}>\r\n                                <span>\r\n                                    提款\r\n                                </span>\r\n                            </button>\r\n                        </dd>\r\n                        <dt>对战胜率</dt>\r\n                        <dd>\r\n                            <input \r\n                                type=\"text\" \r\n                                id='attackVictoryProbability'\r\n                                value={this.state.attackVictoryProbability}\r\n                                onChange={this.inputAttackVictoryProbability}>\r\n                            </input>\r\n                            <button className=\"pay-btn pay-btn-last\" onClick={this.setAttackVictoryProbability}>\r\n                                <span>\r\n                                    设置\r\n                                </span>\r\n                            </button>\r\n                        </dd>\r\n                        <dt>升级费</dt>\r\n                        <dd>\r\n                            <input \r\n                                type=\"text\" \r\n                                id='levelUpFee'\r\n                                value={this.state.levelUpFee}\r\n                                onChange={this.inputLevelUpFee}>\r\n                            </input>\r\n                            <button className=\"pay-btn pay-btn-last\" onClick={this.setLevelUpFee}>\r\n                                <span>\r\n                                    设置\r\n                                </span>\r\n                            </button>\r\n                        </dd>\r\n                        <dt>最低售价</dt>\r\n                        <dd>\r\n                            <input \r\n                                type=\"text\" \r\n                                id='minPrice'\r\n                                value={this.state.minPrice}\r\n                                onChange={this.inputMinPrice}>\r\n                            </input>\r\n                            <button className=\"pay-btn pay-btn-last\" onClick={this.setMinPrice}>\r\n                                <span>\r\n                                    设置\r\n                                </span>\r\n                            </button>\r\n                        </dd>\r\n                        <dt>税金</dt>\r\n                        <dd>\r\n                            <input \r\n                                type=\"text\" \r\n                                id='tax'\r\n                                value={this.state.tax}\r\n                                onChange={this.inputTax}>\r\n                            </input>\r\n                            <button className=\"pay-btn pay-btn-last\" onClick={this.setTax}>\r\n                                <span>\r\n                                    设置\r\n                                </span>\r\n                            </button>\r\n                        </dd>\r\n                        <dt>僵尸售价</dt>\r\n                        <dd>\r\n                            <input \r\n                                type=\"text\" \r\n                                id='zombiePrice'\r\n                                value={this.state.zombiePrice}\r\n                                onChange={this.inputZombiePrice}>\r\n                            </input>\r\n                            <button className=\"pay-btn pay-btn-last\" onClick={this.setZombiePrice}>\r\n                                <span>\r\n                                    设置\r\n                                </span>\r\n                            </button>\r\n                        </dd>\r\n                    </dl>\r\n                </div>\r\n            )\r\n        }else{\r\n            return(\r\n                <div></div>\r\n            )\r\n        }\r\n    }\r\n}\r\n \r\nexport default ContractAdmin;"]},"metadata":{},"sourceType":"module"}